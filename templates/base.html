<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}VECTOR{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&family=Unbounded:wght@200..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Unbounded:wght@500;600;700;800&display=swap" rel="stylesheet">
    {% block head_extra %}{% endblock %}
</head>
<body>

<!-- Шапка -->
<header class="header">
    <div class="header-inner">

        <!-- ЛЕВО: ЛОГО -->
        <div class="logo">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="VECTOR AI">
        </div>

        <nav class="nav" id="nav">
            <a href="/" class="nav-link">Главная</a>

            {% if not current_user.is_authenticated %}
            <a href="/student" class="nav-link">Студент</a>
            <a href="{{ url_for('student_inclusive') }}" class="nav-link">Инклюзивность</a>
            <a href="/employer" class="nav-link">Работодатель</a>
            <a href="/login" class="nav-link login no-indicator">Войти</a>

            {% else %}
            {% if current_user.role == 'student' %}
            <a href="/student" class="nav-link">Кабинет</a>
            <a href="{{ url_for('student_inclusive') }}" class="nav-link">Инклюзивность</a>

            {% elif current_user.role == 'employer' %}
            <a href="/employer" class="nav-link">Кабинет</a>
            <a href="{{ url_for('student_inclusive') }}" class="nav-link">Инклюзивность</a>
            {% endif %}

            <a href="/logout" class="nav-link login no-indicator">Выйти</a>
            {% endif %}

            <span class="nav-indicator" id="nav-indicator"></span>
        </nav>


    </div>
</header>

<!-- Основной контент -->
<main class="container mt-4">
    {% block content %}
    {% endblock %}
</main>

<footer class="footer">
    <div class="footer-container">

        <!-- ЛЕВО -->
        <div class="footer-brand">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="VECTOR AI">
            <p>
                AI-платформа сопоставления талантов и возможностей.
                Создано в Казахстане.
            </p>
        </div>

        <!-- ЦЕНТР -->
        <div class="footer-links">
            <div class="footer-column">
                <h4>Платформа</h4>
                <a href="/student">Студент</a>
                <a href="/employer">Работодатель</a>
                <a href="/">Главная</a>
            </div>

            <div class="footer-column">
                <h4>Компания</h4>
                <a href="#">О проекте</a>
                <a href="#">Контакты</a>
                <a href="#">Политика</a>
            </div>
        </div>

        <!-- ПРАВО -->
        <div class="footer-cta">
            <h4>Начать сейчас</h4>
            <a href="/student" class="footer-btn">Попробовать бесплатно</a>
        </div>

    </div>

    <div class="footer-bottom">
        © 2026 VECTOR AI. Все права защищены.
    </div>
</footer>

{% block scripts %}
{% endblock %}


<script>
    document.addEventListener("DOMContentLoaded", function () {
      const nav = document.getElementById("nav");
      const links = document.querySelectorAll(".nav-link:not(.no-indicator)");
      const indicator = document.getElementById("nav-indicator");

      function moveIndicator(element) {
        if (!element || !indicator) return;
        const navRect = element.parentElement.getBoundingClientRect();
        const rect = element.getBoundingClientRect();
        indicator.style.width = rect.width + "px";
        indicator.style.left = (rect.left - navRect.left) + "px";
      }

      const currentPath = window.location.pathname;

      // ✅ Находим "активную" ссылку: сначала точное совпадение,
      // потом совпадение по префиксу (например /student/* -> /student)
      function getActiveLink() {
        // 1) exact match
        let active = Array.from(links).find(a => a.getAttribute("href") === currentPath);
        if (active) return active;

        // 2) prefix match for sections
        const sections = ["/student", "/student/inclusive", "/employer"]; // добавь сюда другие разделы если появятся
        const section = sections.find(p => currentPath === p || currentPath.startsWith(p + "/"));
        if (section) {
          active = Array.from(links).find(a => a.getAttribute("href") === section);
          if (active) return active;
        }

        // 3) fallback: home for "/"
        if (currentPath === "/") {
          return Array.from(links).find(a => a.getAttribute("href") === "/");
        }

        return null;
      }

      const activeLink = getActiveLink();
      if (activeLink) moveIndicator(activeLink);

      // hover
      links.forEach(link => {
        link.addEventListener("mouseenter", () => moveIndicator(link));
      });

      // when mouse leaves -> back to active
      nav.addEventListener("mouseleave", () => {
        const a = getActiveLink();
        if (a) moveIndicator(a);
      });

      // если меняется размер окна — пересчитать позицию
      window.addEventListener("resize", () => {
        const a = getActiveLink();
        if (a) moveIndicator(a);
      });
    });
</script>

</body>
</html>